(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e82cf11"],{1799:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-pagination",{attrs:{"current-page":e.parentCurrentPage,"page-sizes":e.parentPageSizes,"page-size":e.parentPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.parentTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},s=[],i=(r("a9e3"),{data:function(){return{currentPage:1,pageSizes:[],pageSize:5}},props:{parentCurrentPage:{type:Number,default:1},parentPageSizes:{type:Array,default:function(){return[5,10,15,20]}},parentPageSize:{type:Number,default:5},parentTotal:{type:Number}},created:function(){this.change()},methods:{change:function(){this.currentPage=this.parentCurrentPage,this.pageSizes=this.parentPageSizes,this.pageSize=this.parentPageSize},handleSizeChange:function(e){this.pageSize=e,window.sessionStorage.setItem("newSize",e),this.$emit("parentGetData",this.currentPage,this.pageSize)},handleCurrentChange:function(e){this.currentPage=e,window.sessionStorage.setItem("newPage",e),this.$emit("parentGetData",this.currentPage,this.pageSize)}},components:{}}),n=i,o=r("2877"),c=Object(o["a"])(n,a,s,!1,null,"71b04d66",null);t["a"]=c.exports},d2ee:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("出库管理")]),r("el-breadcrumb-item",[e._v("品相出库管理")])],1),r("el-card",[r("el-row",[r("el-button",{attrs:{type:"primary",plain:"",size:"medium"},on:{click:e.showAddStockOut}},[e._v("新增出库单")])],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.stockOutTableData,border:"",stripe:"",hover:""}},[r("el-table-column",{attrs:{prop:"id",label:"ID",fixed:"",width:"150"}}),r("el-table-column",{attrs:{prop:"createDate",label:"创建时间",fixed:"",width:"150"}}),r("el-table-column",{attrs:{prop:"code",label:"单据编号",width:"150"}}),r("el-table-column",{attrs:{prop:"makerName",label:"制单人",width:"150"}}),r("el-table-column",{attrs:{prop:"orderDate",label:"制单时间",width:"150"}}),r("el-table-column",{attrs:{prop:"storeId",label:"仓库编号",width:"150"}}),r("el-table-column",{attrs:{prop:"updateDate",label:"更新时间",width:"150"}}),r("el-table-column",{attrs:{label:"单据状态",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[1===t.row.status?r("el-tag",{attrs:{type:"danger",round:""}},[e._v("未审核")]):r("el-tag",{attrs:{type:"primary",round:""}},[e._v("审核")])],1)]}}])}),r("el-table-column",{attrs:{label:"审核",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[r("el-button",{attrs:{type:"success",size:"medium",round:""},on:{click:function(r){return e.checkOrder(t.row.id)}}},[e._v("审核")])],1)]}}])}),r("el-table-column",{attrs:{label:"反审核",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"danger",round:"",size:"small"},on:{click:function(r){return e.uncheckOrder(t.row.id)}}},[e._v("反审核")])]}}])}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"warning",icon:"el-icon-edit",size:"mini",circle:""},on:{click:function(r){return e.editOrderVisible(t.row.id)}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:""},on:{click:function(r){return e.removeStockIn(t.row.id)}}})]}}])})],1),r("my-pagination",{attrs:{parentCurrentPage:e.pages.page,parentPageSizes:e.pages.pages,parentPageSize:e.pages.rows,parentTotal:e.pages.count},on:{parentGetData:e.getStockOutData}}),r("el-dialog",{attrs:{title:"添加出库单",visible:e.stockOutDialogVisible,width:"50%"},on:{"update:visible":function(t){e.stockOutDialogVisible=t},close:e.cancelStockOut}},[r("span",[r("el-form",{ref:"stockOutRef",attrs:{model:e.stockOutForm,rules:e.stockOutrules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"出库单号",prop:"code"}},[r("el-input",{model:{value:e.stockOutForm.code,callback:function(t){e.$set(e.stockOutForm,"code",t)},expression:"stockOutForm.code"}})],1),r("el-form-item",{attrs:{label:"仓库ID",prop:"storeId"}},[r("el-select",{model:{value:e.stockOutForm.storeId,callback:function(t){e.$set(e.stockOutForm,"storeId",t)},expression:"stockOutForm.storeId"}},[r("el-option",{attrs:{label:"上海仓库",value:"1"}}),r("el-option",{attrs:{label:"北京仓库",value:"2"}}),r("el-option",{attrs:{label:"华北仓库",value:"3"}})],1)],1),r("el-form-item",{attrs:{label:"制单人ID",prop:"makerName"}},[r("el-input",{attrs:{disabled:""},model:{value:e.makerName,callback:function(t){e.makerName=t},expression:"makerName"}})],1),r("el-form-item",{attrs:{label:"制单时间",prop:"orderDate"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.stockOutForm.orderDate,callback:function(t){e.$set(e.stockOutForm,"orderDate",t)},expression:"stockOutForm.orderDate"}})],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancelStockOut}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addStockOut}},[e._v("确 定")])],1)])],1),r("el-drawer",{attrs:{title:"编辑出库单",visible:e.stockOutVisible,direction:e.direction,"before-close":e.handleClose},on:{"update:visible":function(t){e.stockOutVisible=t}}},[r("span",[r("el-form",{ref:"editOrderListRef",attrs:{model:e.editOrderList,rules:e.editOrderListRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"订单ID",prop:"id"}},[r("el-input",{attrs:{disabled:""},model:{value:e.editOrderList.id,callback:function(t){e.$set(e.editOrderList,"id",t)},expression:"editOrderList.id"}})],1),r("el-form-item",{attrs:{label:"订单编号",prop:"code"}},[r("el-input",{model:{value:e.editOrderList.code,callback:function(t){e.$set(e.editOrderList,"code",t)},expression:"editOrderList.code"}})],1),r("el-form-item",{attrs:{label:"制单人ID",prop:"makerId"}},[r("el-input",{model:{value:e.editOrderList.makerId,callback:function(t){e.$set(e.editOrderList,"makerId",t)},expression:"editOrderList.makerId"}})],1),r("el-form-item",{attrs:{label:"制单时间",prop:"orderDate"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.editOrderList.orderDate,callback:function(t){e.$set(e.editOrderList,"orderDate",t)},expression:"editOrderList.orderDate"}})],1),r("el-form-item",{attrs:{label:"仓库ID",prop:"storeId"}},[r("el-input",{model:{value:e.editOrderList.storeId,callback:function(t){e.$set(e.editOrderList,"storeId",t)},expression:"editOrderList.storeId"}})],1)],1),r("el-button",{attrs:{type:"primary"},on:{click:e.editStockOut}},[e._v("确 定")])],1)])],1)},s=[],i=r("1da1"),n=(r("96cf"),r("1799")),o={data:function(){return{stockOutVisible:!1,direction:"rtl",formInLine:{code:"",time:[],maker:"",status:"",storeId:""},pages:{count:0,page:parseInt(window.sessionStorage.getItem("newSize"))||1,rows:parseInt(window.sessionStorage.getItem("newSize"))||5,pages:[5,10,15,20]},stockOutTableData:[],stockOutDialogVisible:!1,stockOutForm:{code:"",storeId:"",makerId:window.sessionStorage.getItem("userId"),orderDate:""},makerName:window.sessionStorage.getItem("nickName"),stockOutrules:{code:[{required:!0,message:"请输入出库单号",trigger:"blur"},{min:8,max:15,message:"长度在 8 到 15 个字符",trigger:"blur"}],stocskId:[{required:!0,message:"请选择仓库",trigger:"blur"}],makerId:[{required:!0,message:"请输入制单人ID",trigger:"blur"}],orderDate:[{required:!0,message:"请输入仓库ID",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}]},editOrderList:{code:"",id:0,makerId:1,orderDate:"",storeId:1},editOrderListRules:{code:[{required:!0,message:"请输入出库单号",trigger:"blur"},{min:1,max:15,message:"长度在 1 到 15 个字符",trigger:"blur"}],stocskId:[{required:!0,message:"请选择仓库",trigger:"blur"},{min:1,max:15,message:"长度在 1 到 15 个字符",trigger:"blur"}],makerId:[{required:!0,message:"请输入制单人ID",trigger:"blur"},{min:1,max:15,message:"长度在 1 到 15 个字符",trigger:"blur"}],orderDate:[{required:!0,message:"请输入仓库ID",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}]}}},components:{MyPagination:n["a"]},methods:{getStockOutData:function(e,t){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,i,n,o,c,u,l,d,p;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=r.formInLine,i=s.code,n=s.time,o=s.maker,c=s.status,u=s.storeId,l={code:i,startDate:n?n[0]:"",endDate:n?n[1]:"",maker:o,status:c,storeId:u,page:r.pages.page,rows:r.pages.rows},l.page=e||parseInt(window.sessionStorage.getItem("newPage"))||r.pages.page,l.rows=t||parseInt(window.sessionStorage.getItem("newSize"))||r.pages.rows,l=r.$qs.stringify(l),a.next=7,r.$http.get("stockout/list?".concat(l));case 7:d=a.sent,p=d.data,r.stockOutTableData=p.data.data,r.pages.count=p.data.page.count;case 11:case"end":return a.stop()}}),a)})))()},removeStockOut:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将永久删除该出库单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(a=r.sent,"confirm"===a){r.next=5;break}return r.abrupt("return",t.$message("取消删除"));case 5:return s={id:e},s=t.$qs.stringify(s),r.next=9,t.$http.delete("stockout?"+s);case 9:i=r.sent,1===i.data.code?(t.$message({message:"删除出库单成功",type:"success"}),t.getStockOutData()):t.$message({message:"删除出库单失败",type:"error"});case 11:case"end":return r.stop()}}),r)})))()},showAddStockOut:function(){this.stockOutDialogVisible=!0},cancelStockOut:function(){this.$refs.stockOutRef.resetFields(),this.stockOutDialogVisible=!1},addStockOut:function(){var e=this;this.$refs.stockOutRef.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(r){var a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=3;break}return e.$message.error("添加失败"),t.abrupt("return",!1);case 3:return a=e.$qs.stringify(e.stockOutForm),t.next=6,e.$http.post("stockout",a);case 6:s=t.sent,i=s.data,1===i.code?(e.$message({message:"添加成功",type:"success"}),e.stockOutDialogVisible=!1,e.getStockOutData()):e.$message({message:"添加失败",terrorype:"error"});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleSizeChange:function(e){this.pages.rows=e,this.getStockOutData()},handleCurrentChange:function(e){this.pages.page=e,this.getStockOutData()},checkOrder:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={id:e},a=t.$qs.stringify(a),r.next=4,t.$http.put("stockout/check?"+a);case 4:s=r.sent,i=s.data,1===i.code?(t.$message({message:"审核成功",type:"success"}),t.getStockOutData()):t.$message({message:"审核失败",type:"error"});case 7:case"end":return r.stop()}}),r)})))()},uncheckOrder:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={id:e},a=t.$qs.stringify(a),r.next=4,t.$http.put("stockout/uncheck?"+a);case 4:s=r.sent,i=s.data,1===i.code?(t.$message({message:"反审核成功",type:"success"}),t.getStockOutData()):t.$message({message:"反审核失败",type:"error"});case 7:case"end":return r.stop()}}),r)})))()},goDetail:function(e){this.$router.push("/stockout/detail/"+e)},editOrderVisible:function(e){this.stockOutVisible=!0,this.editOrderList.id=e},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},editStockOut:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.editOrderList,r=e.$qs.stringify(r),t.next=4,e.$http.post("stockout/update",r);case 4:a=t.sent,s=a.data,1===s.code?(e.$message({message:"修改订单成功",type:"success"}),e.stockOutVisible=!1,e.getStockOutData()):e.$message({message:"修改订单失败",type:"error"});case 7:case"end":return t.stop()}}),t)})))()}},created:function(){this.getStockOutData()}},c=o,u=r("2877"),l=Object(u["a"])(c,a,s,!1,null,"759e45ec",null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-7e82cf11.23b141d0.js.map